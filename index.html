<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Interactive Review Questions</title>
  <style>
 body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      background: #f9f9f9;
      margin: 0;
      padding: 0;
    }
    h1, h2 {
      color: #2c3e50;
    }
    .container {
      display: flex;
      min-height: 100vh;
    }
    .quiz-panel {
      flex: 4;
      padding: 20px;
    }
    .sidebar, .question-settings {
      background-color: #ecf0f1;
      padding: 20px;
      top: 30px;
      border-left: 1px solid #ccc;
      transition: transform 0.3s ease;
      overflow-x: auto;
      width: 40%;
      min-width: 300px;
      max-width: 500px;
      position: relative;
      overflow-y: auto;
      max-height: calc(100vh - 100px); /* Prevent overflow beyond viewport */
    }

    .collapsed {
      transform: translateX(100%);
    }
    .toggle-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: #3498db;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      z-index: 10;
    }
    .question {
      background: #fff;
      border: 1px solid #ddd;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 5px;
    }

    .feedback {
      margin-top: 10px;
      font-weight: bold;
    }
    button {
      margin-top: 10px;
      padding: 8px 12px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #2980b9;
    }
    select {
      margin-top: 10px;
      padding: 5px;
    }

    .question-settings {
      position: absolute;
      top: 30px;
      right: 0;
      background-color: #ecf0f1;
      border-left: 1px solid #ccc;
      padding: 20px;
      z-index: 9;
    }

.student-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* Two equal columns */
  gap: 10px;
  margin-top: 10px;
}

.student-columns {
  display: flex;
  gap: 20px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.student-column {
  flex: 1;
  min-width: 150px;
}

.student-name {
  font-size: 0.95em;
  margin-bottom: 5px;
  color: #2c3e50;
  white-space: nowrap; /* Prevent line breaks */
}

.scrolling {
  background-color: #f1c40f;
  color: #2c3e50;
  font-weight: bold;
  transition: background-color 0.2s ease;
}

.selected-name {
  font-weight: bold;
  color: #3498db;
}

.student-name:hover {
  text-decoration: underline;
  cursor: pointer;
}

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
<button class="toggle-btn" onclick="toggleSidebarExclusive('sidebar')">‚ò∞ Students</button>
<button class="toggle-btn" style="right: 120px;" onclick="toggleSidebarExclusive('settings')">‚öôÔ∏è Questions Settings</button>

  <div class="container">
    <div class="quiz-panel">
      <h1 id="main-heading">Interactive Review Questions</h1>
      <p>A formative check to gauge how well you have comprehended the core topics explored in class.</p>

      <label for="topic-select">Choose Topic:</label>
      <select id="topic-select" onchange="filterQuestions()">
        <option value="all">All Topics</option>
        <option value="partnership">Partnership</option>
        <option value="corporation">Corporation</option>
        <option value="llc">LLC</option>
      </select>

      <label><input type="checkbox" id="randomize-view" onchange="toggleViewMode()"> View Randomly</label>

      <div id="quiz-container"></div>
    </div>

    <div id="sidebar" class="sidebar collapsed">
      <h2>Select a Section</h2>
      <button onclick="showStudents('11-Aequitas')">11-Aequitas</button>
      <button onclick="showStudents('11-Caritas')">11-Caritas</button>
      <button onclick="showStudents('11-Justitia')">11-Justitia</button>
      <div id="student-list" style="margin-top: 20px;"></div>
      <div id="selected-student" style="margin-top: 20px; font-size: 1.2em; font-weight: bold;"></div>
      <button id="randomize-btn" style="display:none;" onclick="startRandomizer()">üé≤ Randomize</button>
      <button onclick="resetStudentHighlights()">üîÑ Reset Highlights</button>
    </div>

    <div id="settings" class="question-settings collapsed">
      <h2>Question Settings</h2>
      <button onclick="selectAllQuestions()">Select All</button>
      <button onclick="deselectAllQuestions()">Deselect All</button>
      <button onclick="randomizeQuestions()">üé≤ Random Select</button>
      <div id="question-selector"></div>
    </div>
  </div>

  <script>
    const sections = {
      "11-Aequitas": ["Anna", "Ben", "Cara"],
      "11-Caritas": ["David", "Ella", "Faye"],
      "11-Justitia": ["Abong, Alexander Hedo",
"Aguipo, Mc Donniel",
"Ator, Christoff",
"Baquiano, Ronald John",
"CORTES, JASMINE PAOLA",
"del Socorro, Lovelle Smile",
"DELA CRUZ, SIM LORENZO",
"Domingo, David Ni o",
"Espedido, Indigo",
"Espedido, Sophia Ysabella",
"Evangelista, Jude Daniel",
"Felipe, Ninfa Sandra",
"Fuentes, Rey Ezekiel",
"Galindo, Christine Ann",
"Gimena, Boelsterli",
"Gonzales, Dio Gabriel",
"Jaca, Jasmine Therese",
"Lim, Kathlyn Erika",
"Mangunlay, Adam Casey",
"Piao, Shizhen",
"PICA, NATHANIEL PHILIPPE",
"Sia, Khristina Lyre",
"Sy, Azmyth Reagle",
"Sy, Keisha Blair",
"Tidoso, Chloe Eddielyn",
"Tompar, Ethan James Yaro",
"Villamor, Jose Emmanuel",
"VIZCARRA, JECKA",
"Wu, Godwin",
"Zhu, Zhijie"]
    };

    const questions = [
      { text: "What defines a partnership?", topic: "partnership", options: ["A", "B", "C", "D"], correct: 1, explanation: "B is correct." },
      { text: "What is a corporation?", topic: "corporation", options: ["A", "B", "C", "D"], correct: 2, explanation: "C is correct." },
      { text: "What is an LLC?", topic: "llc", options: ["A", "B", "C", "D"], correct: 0, explanation: "A is correct." }
    ];

    let currentList = [], remainingStudents = [], selectedHistory = [];
    let filteredQuestions = [...questions];
    let currentQuestionIndex = 0;
    let randomView = false;

function toggleSidebarExclusive(id) {
  const target = document.getElementById(id);
  const isCollapsed = target.classList.contains("collapsed");

  // Collapse both sidebars first
  ["sidebar", "settings"].forEach(s => {
    document.getElementById(s).classList.add("collapsed");
  });

  // If the target was previously collapsed, show it
  if (isCollapsed) {
    target.classList.remove("collapsed");
  }
}

function showStudents(section) {
  currentList = [...sections[section]];
  remainingStudents = [...currentList];
  selectedHistory = [];

  const listDiv = document.getElementById("student-list");
  const maxPerColumn = 15;
  const columns = [];

  for (let i = 0; i < currentList.length; i += maxPerColumn) {
    const chunk = currentList.slice(i, i + maxPerColumn);
    columns.push(`<div class="student-column">${chunk.map(name => `<div class="student-name">${name}</div>`).join("")}</div>`);
  }

  listDiv.innerHTML = `<h3>Students in ${section}</h3><div class="student-columns">${columns.join("")}</div>`;
  document.getElementById("randomize-btn").style.display = "inline-block";
}

  function startRandomizer() {
  const selectedDiv = document.getElementById("selected-student");

  if (remainingStudents.length === 0) {
    alert("‚úÖ All students selected. Restarting.");
    remainingStudents = [...currentList];
    selectedHistory = [];

    // Clear all highlights
    document.querySelectorAll(".student-name").forEach(el => {
      el.classList.remove("selected-name", "scrolling");
    });

    selectedDiv.textContent = "";
    return;
  }

  let scrollInterval;
  let highlightIndex = 0;
  const allNames = Array.from(document.querySelectorAll(".student-name"));

  // Prepare scrolling effect
  scrollInterval = setInterval(() => {
    allNames.forEach(el => el.classList.remove("scrolling"));
    const name = remainingStudents[highlightIndex % remainingStudents.length];
    const target = allNames.find(el => el.textContent === name);
    if (target) target.classList.add("scrolling");
    highlightIndex++;
  }, 150); // Change highlight every 150ms

  // Final selection after 8 seconds
  setTimeout(() => {
    clearInterval(scrollInterval);
    allNames.forEach(el => el.classList.remove("scrolling"));

    let finalName = remainingStudents[Math.floor(Math.random() * remainingStudents.length)];
    selectedDiv.textContent = `‚úÖ Selected: ${finalName}`;
    remainingStudents = remainingStudents.filter(name => name !== finalName);
    selectedHistory.push(finalName);

    const finalEl = allNames.find(el => el.textContent === finalName);
    if (finalEl) finalEl.classList.add("selected-name");
  }, 8000);
}

    function showQuestion(index) {
      const q = filteredQuestions[index];
      const container = document.getElementById("quiz-container");
      container.innerHTML = `<div class="question">
        <h2>Question ${index + 1}</h2>
        <p>${q.text}</p>
        ${q.options.map((opt, i) => `<label><input type="radio" name="q${index}" value="${i}"> ${opt}</label>`).join("")}
        <div class="feedback" id="feedback-${index}"></div>
        <button onclick="checkAnswer(${index})">Check Answer</button>
        ${index > 0 ? `<button onclick="showQuestion(${index - 1})">Previous</button>` : ""}
        ${index < filteredQuestions.length - 1 ? `<button onclick="showQuestion(${index + 1})">Next</button>` : ""}
      </div>`;
    }

    function checkAnswer(index) {
      const q = filteredQuestions[index];
      const selected = document.querySelector(`input[name="q${index}"]:checked`);
      const feedback = document.getElementById(`feedback-${index}`);
      if (!selected) {
        feedback.textContent =
        feedback.textContent = "Please select an answer.";
        feedback.style.color = "orange";
        return;
      }
      const selectedIndex = parseInt(selected.value);
      if (selectedIndex === q.correct) {
        feedback.textContent = "‚úÖ Correct! " + q.explanation;
        feedback.style.color = "green";
      } else {
        feedback.textContent = "‚ùå Incorrect. " + q.explanation;
        feedback.style.color = "red";
      }
    }

    function filterQuestions() {
      const topic = document.getElementById("topic-select").value;
      filteredQuestions = topic === "all"
        ? [...questions]
        : questions.filter(q => q.topic === topic);
      currentQuestionIndex = 0;
      showQuestion(currentQuestionIndex);
      renderQuestionSelector();
    }

    function toggleViewMode() {
      randomView = document.getElementById("randomize-view").checked;
      if (randomView) {
        filteredQuestions = shuffle([...filteredQuestions]);
      } else {
        filterQuestions(); // Reset to ordered view
      }
      currentQuestionIndex = 0;
      showQuestion(currentQuestionIndex);
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function renderQuestionSelector() {
      const container = document.getElementById("question-selector");
      container.innerHTML = "<h3>Select Questions</h3>";
      questions.forEach((q, i) => {
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = `q-select-${i}`;
        checkbox.checked = filteredQuestions.includes(q);
        checkbox.onchange = () => {
          if (checkbox.checked) {
            if (!filteredQuestions.includes(q)) filteredQuestions.push(q);
          } else {
            filteredQuestions = filteredQuestions.filter(item => item !== q);
          }
          showQuestion(0);
        };
        const label = document.createElement("label");
        label.htmlFor = `q-select-${i}`;
        label.textContent = `Q${i + 1}: ${q.topic}`;
        container.appendChild(checkbox);
        container.appendChild(label);
        container.appendChild(document.createElement("br"));
      });
    }

function resetStudentHighlights() {
  document.querySelectorAll(".student-name").forEach(el => {
    el.classList.remove("selected-name");
  });
  selectedHistory = [];
  remainingStudents = [...currentList];
  document.getElementById("selected-student").textContent = "";
}

    function selectAllQuestions() {
      filteredQuestions = [...questions];
      renderQuestionSelector();
      showQuestion(0);
    }

    function deselectAllQuestions() {
      filteredQuestions = [];
      renderQuestionSelector();
      document.getElementById("quiz-container").innerHTML = "<p>No questions selected.</p>";
    }

    function randomizeQuestions() {
      const count = Math.floor(Math.random() * questions.length) + 1;
      filteredQuestions = shuffle([...questions]).slice(0, count);
      renderQuestionSelector();
      showQuestion(0);
    }

    // Initial render
    filterQuestions();
    renderQuestionSelector();
  </script>
</body>
</html>
